<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Regeleditor met Objectmodel</title>
  <script src="https://unpkg.com/blockly/blockly.min.js"></script>
  <script src="https://unpkg.com/blockly/msg/en.js"></script>
  <!-- Expliciet de JavaScript generator toevoegen -->
  <script src="https://unpkg.com/blockly/javascript_compressed.js"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>Regel Syntax & Objectmodel Editor</h1>
      <div class="tabs">
        <button id="rulesTab" class="tab-button active">Regels</button>
        <button id="objectModelTab" class="tab-button">Objectmodel</button>
      </div>
      <div class="actions">
        <button id="saveButton">Opslaan</button>
        <button id="loadButton">Laden</button>
        <button id="generateButton">Genereer Code</button>
      </div>
    </header>
    
    <main class="vertical-layout">
      <!-- Regels werkruimte -->
      <div id="rulesWorkspace" class="workspace active">
        <div id="blocklyDivRules" class="blockly-container"></div>
        <div class="output-container">
          <h2>Gegenereerde Regel</h2>
          <pre id="outputRules"></pre>
        </div>
      </div>
      
      <!-- Objectmodel werkruimte -->
      <div id="objectModelWorkspace" class="workspace">
        <div id="blocklyDivObjectModel" class="blockly-container"></div>
        <div class="output-container">
          <h2>Gegenereerd Objectmodel</h2>
          <pre id="outputObjectModel"></pre>
        </div>
      </div>
    </main>
  </div>

  <!-- Blockly toolbox definitie voor regels -->
  <xml id="toolboxRules" style="display: none">
    <category name="Regels" colour="210">
      <block type="business_rule"></block>
    </category>
    
    <category name="Acties" colour="180">
      <block type="assignment_action"></block>
      <block type="compliance_action"></block>
    </category>
    
    <category name="Objecten" colour="150">
      <block type="object"></block>
      <block type="fact_reference"></block>
      <block type="role"></block>
      <block type="attribute"></block>
      <block type="characteristic"></block>
    </category>
    
    <category name="Expressies" colour="290">
      <block type="expression"></block>
      <category name="Wiskunde" colour="285">
        <block type="math_operation"></block>
        <block type="minimum_maximum"></block>
        <block type="rounding"></block>
      </category>
    </category>
    
    <category name="Voorwaarden" colour="230">
      <block type="simple_condition"></block>
      <block type="complex_condition"></block>
      <block type="nested_complex_condition"></block>
    </category>
    
    <category name="Waarden" colour="330">
      <block type="literal"></block>
      <block type="boolean_literal"></block>
      <block type="parameter_reference"></block>
    </category>
    
    <category name="Voorbeelden" colour="65">
      <button text="Laad voorbeeld: Afstand initialisatie" callbackKey="loadDistanceInitExample"></button>
      <button text="Laad voorbeeld: Belastingberekening" callbackKey="loadTaxCalculationExample"></button>
      <button text="Laad voorbeeld: Compliance regel" callbackKey="loadComplianceRuleExample"></button>
    </category>
  </xml>
  
  <!-- Blockly toolbox definitie voor objectmodel -->
  <xml id="toolboxObjectModel" style="display: none">
    <category name="Objectmodel" colour="45">
      <block type="object_model"></block>
    </category>
    
    <category name="Objecttypes" colour="60">
      <block type="object_type"></block>
      <block type="characteristic_def"></block>
      <block type="attribute_def"></block>
    </category>
    
    <category name="Relaties" colour="120">
      <block type="relationship_type"></block>
    </category>
    
    <category name="Types" colour="140">
      <block type="type_definition"></block>
      <block type="type_definition_ref"></block>
      <block type="data_type"></block>
      <block type="number_specification"></block>
    </category>
    
    <category name="Parameters" colour="160">
      <block type="parameter"></block>
    </category>
    
    <category name="Voorbeelden" colour="65">
      <button text="Laad voorbeeld: Vlucht objectmodel" callbackKey="loadFlightObjectModelExample"></button>
    </category>
  </xml>

  <!-- Scripts in de juiste volgorde laden -->
  <script src="config.js"></script>
  <script src="block-definitions.js"></script>
  <script src="block-generators.js"></script>
  <script src="object-model-blocks.js"></script>
  <script src="object-model-generators.js"></script>
  <script src="example-rules.js"></script>
  <script src="example-object-models.js"></script>
  <script src="main.js"></script>
</body>
</html>
